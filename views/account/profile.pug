extends ../layout

block content
	.pb-2.mt-2.mb-4.border-bottom
		h3 Profile Information

	form(action='/account/profile', method='POST')
		input(type='hidden', name='_csrf', value=_csrf)
		.form-group.row
			label.col-md-3.col-form-label.font-weight-bold.text-right(for='email') Email
			.col-md-7
				input.form-control(type='email', name='email', id='email', value=user.email, autocomplete='email', required)
			.offset-sm-3.col-md-7.pl-3
				if user.emailVerified
					.text-success.font-italic
						| Verified
				else
					.text-danger.font-italic
						| Unverified: &nbsp;
						a(href='/account/verify') Send verification email
		.form-group.row
			label.col-md-3.col-form-label.font-weight-bold.text-right(for='name') User Name
			.col-md-7
				input.form-control(type='text', name='userName', id='userName', value=user.userName, autocomplete='name')
		.form-group.row
			label.col-md-3.col-form-label.font-weight-bold.text-right(for='location') Pronouns
			.col-md-7
				input.form-control(type='text', name='pronouns', id='pronouns', value=user.profile.pronouns, autocomplete)
		.form-group.row
			label.col-md-3.col-form-label.font-weight-bold.text-right(for='location') Location
			.col-md-7
				input.form-control(type='text', name='location', id='location', value=user.profile.location, autocomplete)
		.form-group.row
			label.col-md-3.col-form-label.font-weight-bold.text-right(for='website') Website
			.col-md-7
				input.form-control(type='text', name='website', id='website', value=user.profile.website, autocomplete='url')
		.form-group.row
			label.col-md-3.col-form-label.font-weight-bold.text-right Gravatar
			.col-sm-4
				img(src=user.gravatar(), class='profile', width='100', height='100')
		.form-group
			.offset-sm-3.col-md-7.pl-2
				button.btn.btn.btn-primary(type='submit')
					| Update Profile

	.pb-2.mt-2.mb-4.border-bottom
		h3 Change Password

	form(action='/account/password', method='POST')
		input(type='hidden', name='_csrf', value=_csrf)
		.form-group.row
			label.col-md-3.col-form-label.font-weight-bold.text-right(for='password') New Password
			.col-md-7
				input.form-control(type='password', name='password', id='password', autocomplete='new-password', minlength='8', required)
		.form-group.row
			label.col-md-3.col-form-label.font-weight-bold.text-right(for='confirmPassword') Confirm Password
			.col-md-7
				input.form-control(type='password', name='confirmPassword', id='confirmPassword', autocomplete='new-password', minlength='8', required)
		.form-group
			.offset-sm-3.col-md-7.pl-2
				button.btn.btn-primary(type='submit')
					| Change Password

	.pb-2.mt-2.mb-4.border-bottom
		h3 Delete Account

	form(action='/account/delete', method='POST', onsubmit="return confirm('Are you sure you want to delete your account?');")
		.form-group
			p.offset-sm-3.col-md-7.pl-2 You can delete your account, but keep in mind this action is irreversible.
			input(type='hidden', name='_csrf', value=_csrf)
			.offset-sm-3.col-md-7.pl-2
				button.btn.btn-danger(type='submit')
					| Delete my account

	.pb-2.mt-2.mb-4.border-bottom
		h3 Linked Accounts
	.form-group
		.offset-sm-3.col-md-7.pl-2
			if user.google
				p.mb-1: a.text-danger(href='/account/unlink/google') Unlink your Google account
			else
				p.mb-1: a(href='/auth/google') Link your Google account
		.offset-sm-3.col-md-7.pl-2
			if user.github
				p.mb-1: a.text-danger(href='/account/unlink/github') Unlink your GitHub account
			else
				p.mb-1: a(href='/auth/github') Link your GitHub account
